---
sidebar_position: 2
---
# Spring IoC和DI

## 一、概要

> **IOC（Inversion of Contro）:控制反转**，将 bean的对象交给 spring容器来管理。是一种**设计思想，把对象交给别人创建，借助于“第三方”实现具有依赖关系的对象之间的解耦。**
>
> **DI（Dependency Injection）:依赖注入**，解决对象之间的依赖关系。所谓依赖注入，**就是由IoC容器在运行期间，动态地将某种依赖关系注入到对象之中。**
>
> **IOC 就是一种反转控制的思想， 而 DI 是对 IOC 的一种具体实现**

## 二、使用IoC的好处

> 1. **可维护性比较好**，非常便于进行单元测试，便于调试程序和诊断故障。代码中的每一个Class都可以单独测试，彼此之间互不影响，只要保证自身的功能无误即可，这就是组件之间低耦合或者无耦合带来的好处。
> 2. **降低对象之间的耦合**，每个开发团队的成员都只需要关注自己要实现的业务逻辑，完全不用去关心其他人的工作进展，因为你的任务跟别人没有任何关系，你的任务可以单独测试，你的任务也不用依赖于别人的组件，再也不用扯不清责任了。所以，在一个大中型项目中，团队成员分工明确、责任明晰，很容易将一个大的任务划分为细小的任务，开发效率和产品质量必将得到大幅度的提高。
> 3. **可复用性好**，我们可以把具有普遍性的常用组件独立出来，反复应用到项目中的其它部分，或者是其它项目，当然这也是面向对象的基本特征。显然，IoC更好地贯彻了这个原则，提高了模块的可复用性。符合接口标准的实现，都可以插接到支持此标准的模块中。
> 4. **IoC生成对象的方式转为外置方式**，也就是把对象生成放在配置文件里进行定义，这样，当我们更换一个实现子类将会变得很简单，只要修改配置文件就可以了，完全具有热插拨的特性

## 三、IoC的原理

> 控制反转是Spring框架的核心。其原理是基于面向对象(OO)设计原则的The Hollywood Principle(好莱坞法则)：Don't call us, we'll call you（别找我，我会来找你的）。也就是说，所有的组件都是被动的，所有的组件初始化和调用都由容器负责。组件处在一个容器当中，由容器负责管理。简单的来讲，就是由容器控制程序之间的关系，而非传统实现中，由程序代码直接操控，即在一个类中调用另外一个类。这也就是所谓“控制反转”的概念所在：控制权由应用代码中转到了外部容器，控制权的转移，即所谓反

## 四、IOC容器在Spring中的实现

- IOC 容器中管理的组件也叫做 bean。在创建bean 之前，首先需要创建 IOC 容器。Spring 提供了 IOC 容器的两种实现方式：

### BeanFactory

- 这是 IOC 容器的基本实现，是 Spring 内部使用的接口。面向 Spring 本身，不提供给开发人员使用。

### ApplicationContext

- BeanFactory 的子接口，提供了更多高级特性。面向 Spring 的使用者，几乎所有场合都使用ApplicationContext 而不是底层的 BeanFactory。
- **ApplicationContext**的主要实现类

![image-20231219190922073](https://cdn.jsdelivr.net/gh/studio-hu/drawingBed/img/202312191909122.png)

![image-20231219190939743](https://cdn.jsdelivr.net/gh/studio-hu/drawingBed/img/202312191909776.png)

















